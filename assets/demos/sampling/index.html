<!doctype html>
<meta charset="utf-8" />
<title>Interactive Sampling — top-k • top-p • temperature</title>
<link rel="stylesheet" href="./styles.css" />

<div class="wrap">
  <header>
    <h1>Interactive Sampling</h1>
    <p>Adjust <b>temperature</b>, <b>top-k</b>, and <b>top-p</b>. The chart updates live, and one token is sampled each step.</p>
  </header>

  <section class="controls">
    <label>Temperature
      <input id="temp" type="range" min="0.2" max="2.0" step="0.05" value="1.00" />
      <output id="tempOut">1.00</output>
    </label>

    <label>Top-k
      <input id="topk" type="range" min="1" max="20" step="1" value="10" />
      <output id="topkOut">10</output>
    </label>

    <label>Top-p
      <input id="topp" type="range" min="0.50" max="1.00" step="0.01" value="0.90" />
      <output id="toppOut">0.90</output>
    </label>

    <label>Filter
      <select id="mode">
        <option value="none">None</option>
        <option value="topk">Top-k only</option>
        <option value="topp" selected>Top-p only</option>
        <option value="both">Both</option>
      </select>
    </label>

    <div class="buttons">
      <button id="play">▶ Play</button>
      <button id="pause">⏸ Pause</button>
      <button id="step">↷ Step</button>
      <label>Seed <input id="seed" type="number" value="42" style="width:5rem" /></label>
      <button id="reset">Reset</button>
    </div>
  </section>

  <section class="viz">
    <canvas id="chart" width="860" height="320"></canvas>
    <div class="readout">
      <div>Sampled token: <b id="sampleOut">—</b></div>
      <div>Support size: <b id="supportOut">—</b> / 20</div>
      <div>Sum(probs): <b id="sumOut">—</b></div>
    </div>
    <pre id="err" style="color:#ffb4b4;margin-top:6px"></pre>
  </section>
</div>

<!-- defer guarantees DOM is ready before JS queries elements -->
<script defer src="./main.js?v=3"></script>
